caffe.reset_all();
clear; close all;
%% settings
folder = 'examples/SRCNN/';
model = [folder 'upconv_7.prototxt'];
weights = [folder 'upconv_7.caffemodel'];
savepath = [folder 'x3.mat'];
layers = 2;

%% load model using mat_caffe
net = caffe.Net(model,weights,'test');

%% reshap parameters
weights_conv = cell(layers,1);



%% save parameters
weights_conv1 = net.layers('conv1_layer').params(1).get_data();
weights_conv2 = net.layers('conv2_layer').params(1).get_data();

biases_conv1 = net.layers('conv1_layer').params(2).get_data();
biases_conv2 = net.layers('conv2_layer').params(2).get_data();


save(savepath,'weights_conv1','biases_conv1','weights_conv2','biases_conv2');

